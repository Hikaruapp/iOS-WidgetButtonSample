## BuyCheck アプリ仕様・画面設計

### 1. データモデル仕様：ShoppingItem
| プロパティ     | 型       | 説明                          |
|----------------|----------|-------------------------------|
| name           | String   | 商品名                        |
| quantity       | Int      | 個数                          |
| isPurchased    | Bool     | 購入済みフラグ（初期: false） |
| sortIndex      | Int      | 並び順（昇順に使用）          |

---

### 2. 本体アプリ仕様

#### 2.1 表示構成
- 表示は **2つのリスト** に分かれる：
  - **未購入リスト**（isPurchased == false）
  - **購入済みリスト**（isPurchased == true）
- 各リスト内の並び順は `sortIndex` 昇順

#### 2.2 操作
- 各アイテム行をタップすると `isPurchased` がトグルされ、リスト間を移動
- 削除はスワイプ操作で可能（どちらのリストからでも）
- 「+」ボタンはリストの末尾に表示され、アイテム追加画面に遷移
- アイテム追加後、購入状態変更後、削除後には `WidgetCenter.shared.reloadAllTimelines()` を呼び出す

#### 2.3 購入状態の見た目
- 購入済み（isPurchased == true）の商品名には**取り消し線**を適用

---

### 3. 追加画面（AddItemView）
- 商品名（TextField）と個数（Stepper）を入力してアイテムを追加
- 追加後、自動的にウィジェット更新処理を行う

---

### 4. ウィジェット仕様

#### 4.1 表示内容
- AppGroup 経由で SwiftData を読み込み
- 最大3件（sortIndex昇順）を表示
- **isPurchased に関係なく全件対象**
- 表示構成：
  - ヘッダー："次に買うもの"
  - 各行：左に商品名（省略あり）・右に個数（"○個" グレー表示）
  - **購入済み（isPurchased == true）のアイテム名には取り消し線が入る**

#### 4.2 操作
- アイテム行をタップすると `isPurchased` がトグルされる（未購入 ↔ 購入済み）
- トグル後、自動的にウィジェットが再描画される

#### 4.3 背景設定
- `.containerBackground(.fill.tertiary, for: .widget)` を使用

#### 4.4 画面設計（例：3件表示時）

#### 次に買うもの

- 牛乳 … 2個
- 卵 … 1個
- ~~パン~~ … 3個

- ヘッダーは固定表示
- アイテムは最大3件、HStackレイアウトで左右に分割
- 商品名は左寄せ・1行、省略付き。個数は右寄せでグレー表示
- 購入済みアイテム名には取り消し線を適用

---

このドキュメントは現在の仕様を確定し、設計フェーズでの参照基準となる。今後の変更はこの文書に対して明示的に反映される。
